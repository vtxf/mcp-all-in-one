# 添加MCP自我配置工具

## 概述

为mcp-all-in-one添加MCP自我配置功能，使其能够作为MCP服务器提供配置管理的工具。这些工具将允许MCP客户端（如Claude Code）验证、显示、获取配置Schema以及设置MCP配置信息。

## 变更理由

当前mcp-all-in-one只作为MCP服务代理运行，但无法通过MCP协议动态管理配置。这导致用户需要：
1. 手动编辑配置文件
2. 重启服务以应用配置变更
3. 无法通过MCP客户端验证配置正确性

通过添加自我配置工具，用户可以通过任何MCP客户端直接管理MCP配置，提供更好的用户体验和更便捷的配置管理方式。

## 目标

1. **配置验证**: 提供工具验证MCP配置文件的正确性
2. **配置查看**: 提供工具查看当前或指定配置文件内容
3. **配置Schema**: 提供工具获取MCP配置的JSON Schema
4. **配置设置**: 提供工具动态修改MCP配置

## 影响范围

- **核心功能**: 在AggregatedServer中添加四个新的MCP工具
- **配置管理**: 可能需要增强ConfigLoader和ConfigValidator
- **类型定义**: 可能需要添加新的类型定义

## 设计考虑

1. **向后兼容**: 新功能不影响现有的代理功能
2. **安全性**: 配置修改功能需要适当的安全检查
3. **原子性**: 配置修改操作应该是原子性的
4. **验证**: 所有配置操作都应该通过现有的验证机制

## 相关规范

- constitution/spec.md - 核心功能规范
- configuration-management/spec.md - 配置管理规范